os: linux
dist: focal
language: go
go:
  - 1.14.x
git:
  depth: 1
install:
  - go get -v --tags extended github.com/gohugoio/hugo
  - hugo version
branches:
  only:
  - master
env:
  - GO111MODULE=on
script:
  - ./build.sh
deploy:
  strategy: git
  provider: pages
  skip_cleanup: true
  token: $GITHUB_TOKEN
  local_dir: .build/
  on:
    branch: master
cache:
  directories:
    - $GOPATH/pkg/mod
